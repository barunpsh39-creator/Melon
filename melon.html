<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë§ˆì­ ì‚¬ìœ¡ ì‹œë®¬ë ˆì´í„°</title>
  <style>
    :root {
      --mint: #34d399;
      --mint-dark: #059669;
      --bg: #ecfdf5;
      --card: #ffffff;
      --text: #1f2937;
      --sub: #4b5563;
      --danger: #ef4444;
      --gold: #f59e0b;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      padding: 16px;
      font-family: "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
      background: radial-gradient(circle at top, #d1fae5, var(--bg));
      color: var(--text);
      display: grid;
      place-items: center;
    }

    .game {
      width: min(640px, 96vw);
      background: var(--card);
      border-radius: 22px;
      padding: 22px;
      box-shadow: 0 18px 34px rgba(5, 150, 105, 0.16);
    }

    h1 {
      margin: 0;
      font-size: 1.8rem;
    }

    .desc {
      margin: 8px 0 14px;
      color: var(--sub);
      line-height: 1.5;
    }

    .top {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 14px;
    }

    .chip {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      font-weight: 800;
    }

    .chip small {
      display: block;
      font-size: 0.8rem;
      color: var(--sub);
      margin-bottom: 3px;
      font-weight: 600;
    }

    .pet-wrap {
      display: flex;
      justify-content: center;
      margin: 8px 0 12px;
    }

    .pet {
      width: 190px;
      aspect-ratio: 1/1;
      border-radius: 50%;
      background: linear-gradient(145deg, #a7f3d0, #34d399);
      display: grid;
      place-items: center;
      font-size: 3rem;
      transition: transform 0.2s ease;
      box-shadow: inset -10px -12px 0 rgba(0, 0, 0, 0.07);
    }

    .pet.happy { transform: translateY(-6px) scale(1.03); }
    .pet.sad { filter: grayscale(0.5); }

    .stats {
      display: grid;
      gap: 10px;
      margin-bottom: 14px;
    }

    .stat-row {
      display: grid;
      grid-template-columns: 70px 1fr 42px;
      align-items: center;
      gap: 8px;
      font-weight: 700;
    }

    .bar {
      width: 100%;
      height: 14px;
      border-radius: 999px;
      overflow: hidden;
      background: #e5e7eb;
    }

    .fill {
      height: 100%;
      border-radius: inherit;
      transition: width 0.2s ease;
      background: linear-gradient(90deg, #86efac, #22c55e);
    }

    .fill.low { background: linear-gradient(90deg, #fda4af, #ef4444); }

    .actions {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 9px;
    }

    button {
      border: 0;
      border-radius: 11px;
      background: var(--mint);
      color: #064e3b;
      font-weight: 800;
      padding: 10px;
      cursor: pointer;
    }

    button:hover { background: var(--mint-dark); color: #ecfdf5; }
    button:disabled { cursor: not-allowed; background: #d1d5db; color: #6b7280; }

    .status {
      margin-top: 12px;
      border-radius: 10px;
      text-align: center;
      font-weight: 700;
      padding: 10px;
      background: #ecfdf5;
    }

    .status.over {
      background: #fee2e2;
      color: #991b1b;
    }

    .restart {
      margin-top: 10px;
      width: 100%;
      display: none;
      background: var(--gold);
      color: #78350f;
    }

    .restart.show { display: block; }
  </style>
</head>
<body>
  <section class="game">
    <h1>ğŸ£ ë§ˆì­ ì‚¬ìœ¡ ì‹œë®¬ë ˆì´í„°</h1>
    <p class="desc">ë‚˜ëŠ” ë§ˆì­ì„ ì‚¬ìœ¡(?)í•˜ëŠ” ì§‘ì‚¬ë‹¤! ë°¥Â·ë†€ì´Â·ì²­ì†ŒÂ·íœ´ì‹Â·í›ˆë ¨ìœ¼ë¡œ ì˜¤ë˜ ìƒì¡´ì‹œí‚¤ê³  ì½”ì¸ì„ ëª¨ì•„ë³´ì„¸ìš”.</p>

    <div class="top">
      <div class="chip"><small>ìƒì¡´ ì¼ìˆ˜</small><span id="day">1ì¼ì°¨</span></div>
      <div class="chip"><small>ì½”ì¸</small><span id="coin">0</span></div>
      <div class="chip"><small>ë“±ê¸‰</small><span id="rank">ìƒˆì‹¹</span></div>
    </div>

    <div class="pet-wrap"><div id="pet" class="pet" aria-live="polite">ğŸ™‚</div></div>
    <div class="stats" id="stats"></div>

    <div class="actions">
      <button data-action="feed">ğŸš ê¸‰ì‹</button>
      <button data-action="play">âš½ ë†€ì´</button>
      <button data-action="clean">ğŸ§¼ ì²­ì†Œ</button>
      <button data-action="rest">ğŸ› íœ´ì‹</button>
      <button data-action="train">ğŸ‹ í›ˆë ¨</button>
      <button data-action="inspect">ğŸ” ì ê²€</button>
    </div>

    <div id="status" class="status">ì‚¬ìœ¡ì¥ ì˜¤í”ˆ! ë§ˆì­ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš”.</div>
    <button id="restart" class="restart">ë‹¤ì‹œ ì‚¬ìœ¡ ì‹œì‘</button>
  </section>

  <script>
    const state = {
      hunger: 72,
      fun: 66,
      clean: 68,
      energy: 64,
      day: 1,
      coin: 0,
      alive: true,
      ticks: 0,
    };

    const rankTable = [
      { coin: 0, name: "ìƒˆì‹¹" },
      { coin: 40, name: "ì´ˆë³´ ì‚¬ìœ¡ì‚¬" },
      { coin: 100, name: "ë² í…Œë‘ ì‚¬ìœ¡ì‚¬" },
      { coin: 180, name: "ë§ˆì­ ë§ˆìŠ¤í„°" },
    ];

    const statLabels = {
      hunger: "ë°°ë¶€ë¦„",
      fun: "ì¦ê±°ì›€",
      clean: "ì²­ê²°",
      energy: "ì²´ë ¥",
    };

    const statsEl = document.getElementById("stats");
    const petEl = document.getElementById("pet");
    const statusEl = document.getElementById("status");
    const dayEl = document.getElementById("day");
    const coinEl = document.getElementById("coin");
    const rankEl = document.getElementById("rank");
    const restartEl = document.getElementById("restart");
    const actionButtons = document.querySelectorAll("button[data-action]");

    function clamp(value) {
      return Math.max(0, Math.min(100, value));
    }

    function getRank() {
      return rankTable.reduce((acc, cur) => (state.coin >= cur.coin ? cur.name : acc), rankTable[0].name);
    }

    function avgStat() {
      return (state.hunger + state.fun + state.clean + state.energy) / 4;
    }

    function setMoodAndMessage() {
      const avg = avgStat();
      petEl.classList.remove("happy", "sad");

      if (avg >= 75) {
        petEl.textContent = "ğŸ˜„";
        petEl.classList.add("happy");
        statusEl.textContent = "ë§ˆì­ì´ ì»¨ë””ì…˜ ìµœìƒ! ì½”ì¸ì„ ë” ë²Œ ìˆ˜ ìˆì–´ìš”.";
      } else if (avg >= 45) {
        petEl.textContent = "ğŸ™‚";
        statusEl.textContent = "ì‚¬ìœ¡ ìƒíƒœ ì–‘í˜¸. ê¾¸ì¤€íˆ ëŒë´ì£¼ì„¸ìš”.";
      } else {
        petEl.textContent = "ğŸ˜Ÿ";
        petEl.classList.add("sad");
        statusEl.textContent = "ìœ„í—˜! ì§€ê¸ˆ ë°”ë¡œ ëŒë´„ í–‰ë™ì´ í•„ìš”í•©ë‹ˆë‹¤.";
      }
    }

    function render() {
      statsEl.innerHTML = Object.keys(statLabels).map((key) => {
        const value = Math.round(state[key]);
        return `
          <div class="stat-row">
            <span>${statLabels[key]}</span>
            <div class="bar"><div class="fill ${value < 30 ? "low" : ""}" style="width:${value}%"></div></div>
            <span>${value}</span>
          </div>
        `;
      }).join("");

      dayEl.textContent = `${state.day}ì¼ì°¨`;
      coinEl.textContent = `${state.coin}`;
      rankEl.textContent = getRank();

      if (state.alive) {
        statusEl.classList.remove("over");
        setMoodAndMessage();
      }
    }

    function endGame() {
      state.alive = false;
      petEl.textContent = "ğŸ’€";
      petEl.classList.add("sad");
      statusEl.textContent = `ë§ˆì­ ì‚¬ìœ¡ ì‹¤íŒ¨... ${state.day}ì¼ ìƒì¡´ / ì½”ì¸ ${state.coin}. ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”!`;
      statusEl.classList.add("over");
      actionButtons.forEach((btn) => { btn.disabled = true; });
      restartEl.classList.add("show");
    }

    function applyUpdates(changes, coinDelta = 0) {
      if (!state.alive) return;

      Object.entries(changes).forEach(([k, v]) => {
        state[k] = clamp(state[k] + v);
      });

      state.coin = Math.max(0, state.coin + coinDelta);

      const isDead = Object.keys(statLabels).some((k) => state[k] <= 0);
      if (isDead) {
        endGame();
      }

      render();
    }

    function passiveTick() {
      if (!state.alive) return;
      state.ticks += 1;

      if (state.ticks % 3 === 0) {
        state.day += 1;
        state.coin += 5;
      }

      applyUpdates({ hunger: -4, fun: -3, clean: -3, energy: -3 }, 0);
    }

    function inspect() {
      if (!state.alive) return;
      const worst = Object.keys(statLabels).sort((a, b) => state[a] - state[b])[0];
      statusEl.textContent = `ì ê²€ ê²°ê³¼: ${statLabels[worst]} ìˆ˜ì¹˜ê°€ ê°€ì¥ ë‚®ì•„ìš”.`;
    }

    actionButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const action = button.dataset.action;

        if (action === "feed") applyUpdates({ hunger: +22, clean: -8, energy: -2 }, 3);
        if (action === "play") applyUpdates({ fun: +20, hunger: -10, energy: -10, clean: -4 }, 4);
        if (action === "clean") applyUpdates({ clean: +24, fun: -3, energy: -3 }, 3);
        if (action === "rest") applyUpdates({ energy: +24, hunger: -9, fun: -4 }, 2);
        if (action === "train") applyUpdates({ energy: -13, hunger: -9, fun: +9, clean: -6 }, 8);
        if (action === "inspect") inspect();
      });
    });

    restartEl.addEventListener("click", () => {
      window.location.reload();
    });

    setInterval(passiveTick, 4000);
    render();
  </script>
</body>
</html>
